!function(){function a(a){return a.replace(/^\s+|\s+$/g,"")}function b(a){return a.replace(/^\s+/g,"")}function c(c,d,e,f){function p(){return this.pos=0,this.token="",this.current_mode="CONTENT",this.tags={parent:"parent1",parentcount:1,parent1:""},this.tag_type="",this.token_text=this.last_token=this.last_text=this.token_type="",this.newlines=0,this.indent_content=h,this.Utils={whitespace:"\n\r  ".split(""),single_token:"br,input,link,meta,!doctype,basefont,base,area,hr,wbr,param,img,isindex,?xml,embed,?php,?,?=".split(","),extra_liners:"head,body,/html".split(","),in_array:function(a,b){for(var c=0;c<b.length;c++)if(a===b[c])return!0;return!1}},this.traverse_whitespace=function(){var a="";if(a=this.input.charAt(this.pos),this.Utils.in_array(a,this.Utils.whitespace)){for(this.newlines=0;this.Utils.in_array(a,this.Utils.whitespace);)n&&"\n"===a&&this.newlines<=o&&(this.newlines+=1),this.pos++,a=this.input.charAt(this.pos);return!0}return!1},this.get_content=function(){for(var a="",b=[],c=!1;"<"!==this.input.charAt(this.pos);){if(this.pos>=this.input.length)return b.length?b.join(""):["","TK_EOF"];this.traverse_whitespace()?b.length&&(c=!0):(a=this.input.charAt(this.pos),this.pos++,c&&(this.line_char_count>=this.wrap_line_length?(this.print_newline(!1,b),this.print_indentation(b)):(this.line_char_count++,b.push(" ")),c=!1),this.line_char_count++,b.push(a))}return b.length?b.join(""):""},this.get_contents_to=function(a){if(this.pos===this.input.length)return["","TK_EOF"];var c="",d=new RegExp("</"+a+"\\s*>","igm");d.lastIndex=this.pos;var e=d.exec(this.input),f=e?e.index:this.input.length;return this.pos<f&&(c=this.input.substring(this.pos,f),this.pos=f),c},this.record_tag=function(a){this.tags[a+"count"]?(this.tags[a+"count"]++,this.tags[a+this.tags[a+"count"]]=this.indent_level):(this.tags[a+"count"]=1,this.tags[a+this.tags[a+"count"]]=this.indent_level),this.tags[a+this.tags[a+"count"]+"parent"]=this.tags.parent,this.tags.parent=a+this.tags[a+"count"]},this.retrieve_tag=function(a){if(this.tags[a+"count"]){for(var b=this.tags.parent;b&&a+this.tags[a+"count"]!==b;)b=this.tags[b+"parent"];b&&(this.indent_level=this.tags[a+this.tags[a+"count"]],this.tags.parent=this.tags[b+"parent"]),delete this.tags[a+this.tags[a+"count"]+"parent"],delete this.tags[a+this.tags[a+"count"]],1===this.tags[a+"count"]?delete this.tags[a+"count"]:this.tags[a+"count"]--}},this.get_tag=function(a){var f,g,b="",c=[],d="",e=!1,h=this.pos,i=this.line_char_count;a=void 0!==a?a:!1;do{if(this.pos>=this.input.length)return a&&(this.pos=h,this.line_char_count=i),c.length?c.join(""):["","TK_EOF"];if(b=this.input.charAt(this.pos),this.pos++,this.Utils.in_array(b,this.Utils.whitespace))e=!0;else if(("'"===b||'"'===b)&&(b+=this.get_unformatted(b),e=!0),"="===b&&(e=!1),c.length&&"="!==c[c.length-1]&&">"!==b&&e&&(this.line_char_count>=this.wrap_line_length?(this.print_newline(!1,c),this.print_indentation(c)):(c.push(" "),this.line_char_count++),e=!1),"<"!==b||f||(f=this.pos-1),this.line_char_count++,c.push(b),c[1]&&"!"===c[1]){c=[this.get_comment(f)];break}}while(">"!==b);var k,j=c.join("");k=-1!==j.indexOf(" ")?j.indexOf(" "):j.indexOf(">");var l=j.substring(1,k).toLowerCase();return"/"===j.charAt(j.length-2)||this.Utils.in_array(l,this.Utils.single_token)?a||(this.tag_type="SINGLE"):"script"===l?a||(this.record_tag(l),this.tag_type="SCRIPT"):"style"===l?a||(this.record_tag(l),this.tag_type="STYLE"):this.is_unformatted(l,m)?(d=this.get_unformatted("</"+l+">",j),c.push(d),f>0&&this.Utils.in_array(this.input.charAt(f-1),this.Utils.whitespace)&&c.splice(0,0,this.input.charAt(f-1)),g=this.pos-1,this.Utils.in_array(this.input.charAt(g+1),this.Utils.whitespace)&&c.push(this.input.charAt(g+1)),this.tag_type="SINGLE"):"!"===l.charAt(0)?a||(this.tag_type="SINGLE",this.traverse_whitespace()):a||("/"===l.charAt(0)?(this.retrieve_tag(l.substring(1)),this.tag_type="END",this.traverse_whitespace()):(this.record_tag(l),"html"!==l.toLowerCase()&&(this.indent_content=!0),this.tag_type="START",this.traverse_whitespace()),this.Utils.in_array(l,this.Utils.extra_liners)&&(this.print_newline(!1,this.output),this.output.length&&"\n"!==this.output[this.output.length-2]&&this.print_newline(!0,this.output))),a&&(this.pos=h,this.line_char_count=i),c.join("")},this.get_comment=function(a){var b="",c=">",d=!1;for(this.pos=a,input_char=this.input.charAt(this.pos),this.pos++;this.pos<=this.input.length&&(b+=input_char,b[b.length-1]!==c[c.length-1]||-1===b.indexOf(c));)!d&&b.length<10&&(0===b.indexOf("<![if")?(c="<![endif]>",d=!0):0===b.indexOf("<![cdata[")?(c="]]>",d=!0):0===b.indexOf("<![")?(c="]>",d=!0):0===b.indexOf("<!--")&&(c="-->",d=!0)),input_char=this.input.charAt(this.pos),this.pos++;return b},this.get_unformatted=function(a,b){if(b&&-1!==b.toLowerCase().indexOf(a))return"";var c="",d="",e=!0;do{if(this.pos>=this.input.length)return d;if(c=this.input.charAt(this.pos),this.pos++,this.Utils.in_array(c,this.Utils.whitespace)){if(!e){this.line_char_count--;continue}if("\n"===c||"\r"===c){d+="\n",this.line_char_count=0;continue}}d+=c,this.line_char_count++,e=!0}while(-1===d.toLowerCase().indexOf(a));return d},this.get_token=function(){var a;if("TK_TAG_SCRIPT"===this.last_token||"TK_TAG_STYLE"===this.last_token){var b=this.last_token.substr(7);return a=this.get_contents_to(b),"string"!=typeof a?a:[a,"TK_"+b]}if("CONTENT"===this.current_mode)return a=this.get_content(),"string"!=typeof a?a:[a,"TK_CONTENT"];if("TAG"===this.current_mode){if(a=this.get_tag(),"string"!=typeof a)return a;var c="TK_TAG_"+this.tag_type;return[a,c]}},this.get_full_indent=function(a){return a=this.indent_level+a||0,1>a?"":Array(a+1).join(this.indent_string)},this.is_unformatted=function(a,b){if(!this.Utils.in_array(a,b))return!1;if("a"!==a.toLowerCase()||!this.Utils.in_array("a",b))return!0;var c=this.get_tag(!0),d=(c||"").match(/^\s*<\s*\/?([a-z]*)\s*[^>]*>\s*$/);return!d||this.Utils.in_array(d,b)?!0:!1},this.printer=function(a,c,d,e,f){this.input=a||"",this.output=[],this.indent_character=c,this.indent_string="",this.indent_size=d,this.brace_style=f,this.indent_level=0,this.wrap_line_length=e,this.line_char_count=0;for(var g=0;g<this.indent_size;g++)this.indent_string+=this.indent_character;this.print_newline=function(a,b){this.line_char_count=0,b&&b.length&&(a||"\n"!==b[b.length-1])&&b.push("\n")},this.print_indentation=function(a){for(var b=0;b<this.indent_level;b++)a.push(this.indent_string),this.line_char_count+=this.indent_string.length},this.print_token=function(a){(a||""!==a)&&this.output.length&&"\n"===this.output[this.output.length-1]&&(this.print_indentation(this.output),a=b(a)),this.print_token_raw(a)},this.print_token_raw=function(a){a&&""!==a&&(a.length>1&&"\n"===a[a.length-1]?(this.output.push(a.slice(0,-1)),this.print_newline(!1,this.output)):this.output.push(a));for(var b=0;b<this.newlines;b++)this.print_newline(b>0,this.output);this.newlines=0},this.indent=function(){this.indent_level++},this.unindent=function(){this.indent_level>0&&this.indent_level--}},this}var g,h,i,j,k,l,m,n,o;for(d=d||{},void 0===d.wrap_line_length&&void 0!==d.max_char&&(d.wrap_line_length=d.max_char),h=d.indent_inner_html||!1,i=parseInt(d.indent_size||4,10),j=d.indent_char||" ",l=d.brace_style||"collapse",k=0===d.wrap_line_length?32786:parseInt(d.wrap_line_length||250,10),m=d.unformatted||["a","span","bdo","em","strong","dfn","code","samp","kbd","var","cite","abbr","acronym","q","sub","sup","tt","i","b","big","small","u","s","strike","font","ins","del","pre","address","dt","h1","h2","h3","h4","h5","h6"],n=d.preserve_newlines||!0,o=n?parseInt(d.max_preserve_newlines||32786,10):0,g=new p,g.printer(c,j,i,k,l);;){var q=g.get_token();if(g.token_text=q[0],g.token_type=q[1],"TK_EOF"===g.token_type)break;switch(g.token_type){case"TK_TAG_START":g.print_newline(!1,g.output),g.print_token(g.token_text),g.indent_content&&(g.indent(),g.indent_content=!1),g.current_mode="CONTENT";break;case"TK_TAG_STYLE":case"TK_TAG_SCRIPT":g.print_newline(!1,g.output),g.print_token(g.token_text),g.current_mode="CONTENT";break;case"TK_TAG_END":if("TK_CONTENT"===g.last_token&&""===g.last_text){var r=g.token_text.match(/\w+/)[0],s=g.output[g.output.length-1].match(/<\s*(\w+)/);(null===s||s[1]!==r)&&g.print_newline(!1,g.output)}g.print_token(g.token_text),g.current_mode="CONTENT";break;case"TK_TAG_SINGLE":var t=g.token_text.match(/^\s*<([a-z]+)/i);t&&g.Utils.in_array(t[1],m)||g.print_newline(!1,g.output),g.print_token(g.token_text),g.current_mode="CONTENT";break;case"TK_CONTENT":g.print_token(g.token_text),g.current_mode="TAG";break;case"TK_STYLE":case"TK_SCRIPT":if(""!==g.token_text){g.print_newline(!1,g.output);var v,u=g.token_text,w=1;"TK_SCRIPT"===g.token_type?v="function"==typeof e&&e:"TK_STYLE"===g.token_type&&(v="function"==typeof f&&f),"keep"===d.indent_scripts?w=0:"separate"===d.indent_scripts&&(w=-g.indent_level);var x=g.get_full_indent(w);if(v)u=v(u.replace(/^\s*/,x),d);else{var y=u.match(/^\s*/)[0],z=y.match(/[^\n\r]*$/)[0].split(g.indent_string).length-1,A=g.get_full_indent(w-z);u=u.replace(/^\s*/,x).replace(/\r\n|\r|\n/g,"\n"+A).replace(/\s+$/,"")}u&&(g.print_token_raw(x+a(u)),g.print_newline(!1,g.output))}g.current_mode="TAG"}g.last_token=g.token_type,g.last_text=g.token_text}return g.output.join("")}if("function"==typeof define)define(["./beautify.js","./beautify-css.js"],function(a,b){return{html_beautify:function(d,e){return c(d,e,a,b)}}});else if("undefined"!=typeof exports){var d=require("./beautify.js").js_beautify,e=require("./beautify-css.js").css_beautify;exports.html_beautify=function(a,b){return c(a,b,d,e)}}else"undefined"!=typeof window?window.html_beautify=function(a,b){return c(a,b,window.js_beautify,window.css_beautify)}:"undefined"!=typeof global&&(global.html_beautify=function(a,b){return c(a,b,global.js_beautify,global.css_beautify)})}();